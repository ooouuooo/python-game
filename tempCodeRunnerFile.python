import tkinter as tk
from PIL import Image, ImageTk

root = tk.Tk()
root.title("üíó ÎØ∏ÏÜåÎÖÄ Ïó∞Ïï† ÏãúÎÆ¨Î†àÏù¥ÌÑ∞ üíó")
root.geometry("800x600")

# ÏãúÎÇòÎ¶¨Ïò§ Îç∞Ïù¥ÌÑ∞
scenario = [
    {"bg": "school.png", "char": "haruka.png", "text": "ÌïòÎ£®Ïπ¥: ÏïàÎÖï! Ï†ÑÌïôÏÉùÏù¥ÏßÄ?"},
    {"bg": "school.png", "char": "haruka.png", "text": "ÌïòÎ£®Ïπ¥: ÎÇòÎäî ÌïòÎ£®Ïπ¥Ïïº. ÏïûÏúºÎ°ú Ïûò Î∂ÄÌÉÅÌï¥!"},
    {"bg": "school.png", "char": "haruka.png", "text": "ÎãπÏã†ÏùÄ Ïñ¥ÎñªÍ≤å ÎåÄÎãµÌï†Íπå?",
     "choices": [("Î∞òÍ∞ëÎã§Í≥† ÌïúÎã§", "ÌïòÎ£®Ïπ¥: ÏôÄ! Í∏∞Îªê! ‚ù§Ô∏è"), ("Í∑∏ÎÉ• Í≥†Í∞úÎßå ÎÅÑÎçïÏù∏Îã§", "ÌïòÎ£®Ïπ¥: ...Ïñ¥, Í∑∏Îûò.üò¢")]}
]

scene_index = 0

# Î∞∞Í≤Ω
bg_img = ImageTk.PhotoImage(Image.open(scenario[0]["bg"]).resize((800, 600)))
bg_label = tk.Label(root, image=bg_img)
bg_label.place(x=0, y=0)

# Ï∫êÎ¶≠ÌÑ∞
char_img = ImageTk.PhotoImage(Image.open(scenario[0]["char"]).resize((300, 400)))
char_label = tk.Label(root, image=char_img, bg="#ffffff")
char_label.place(x=250, y=150)

# ÎåÄÌôî ÌÖçÏä§Ìä∏
text_label = tk.Label(root, text=scenario[0]["text"], font=("Arial", 16), bg="white", wraplength=700)
text_label.place(x=50, y=500)

# ÏÑ†ÌÉùÏßÄ Î≤ÑÌäº
btn1 = tk.Button(root, text="Îã§Ïùå ‚ñ∂", font=("Arial", 12))
btn2 = tk.Button(root, text="", font=("Arial", 12))

def next_scene():
    global scene_index
    scene_index += 1
    if scene_index >= len(scenario):
        text_label.config(text="THE END üíû")
        btn1.place_forget()
        btn2.place_forget()
        return
    
    scene = scenario[scene_index]
    text_label.config(text=scene["text"])
    
    # Î∞∞Í≤Ω, Ï∫êÎ¶≠ÌÑ∞ Î≥ÄÍ≤Ω
    new_bg = ImageTk.PhotoImage(Image.open(scene["bg"]).resize((800, 600)))
    bg_label.config(image=new_bg)
    bg_label.image = new_bg

    new_char = ImageTk.PhotoImage(Image.open(scene["char"]).resize((300, 400)))
    char_label.config(image=new_char)
    char_label.image = new_char

    # ÏÑ†ÌÉùÏßÄ Ï≤òÎ¶¨
    if "choices" in scene:
        btn1.config(text=scene["choices"][0][0], command=lambda: show_result(scene["choices"][0][1]))
        btn2.config(text=scene["choices"][1][0], command=lambda: show_result(scene["choices"][1][1]))
        btn1.place(x=100, y=550)
        btn2.place(x=300, y=550)
    else:
        btn1.config(text="Îã§Ïùå ‚ñ∂", command=next_scene)
        btn2.place_forget()

def show_result(result_text):
    text_label.config(text=result_text)
    btn1.config(text="Îã§Ïùå ‚ñ∂", command=next_scene)
    btn2.place_forget()

btn1.config(command=next_scene)
btn1.place(x=350, y=550)

root.mainloop()
